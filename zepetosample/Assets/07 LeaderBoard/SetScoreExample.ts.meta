fileFormatVersion: 2
guid: 5198442fe9e8e624b89f69386a563c4a
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: '{"source":"\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\",
    { value: true });\r\nconst UnityEngine_1 = require(\"UnityEngine\");\r\nconst
    ZEPETO_Script_1 = require(\"ZEPETO.Script\");\r\nconst ZEPETO_Script_Leaderboard_1
    = require(\"ZEPETO.Script.Leaderboard\");\r\nconst ClientStarter_1 = require(\"../Multiplay/ClientStarter\");\r\nconst
    UnityEngine_UI_1 = require(\"UnityEngine.UI\");\r\nconst ZEPETO_Character_Controller_1
    = require(\"ZEPETO.Character.Controller\");\r\nconst ZEPETO_World_1 = require(\"ZEPETO.World\");\r\nvar
    picList;\r\nvar textList;\r\nvar score;\r\nvar text;\r\nvar name;\r\nvar clearPreviousScore
    = true;\r\nvar MinTime = 0;\r\nvar ScoreTime = 1;\r\nvar image;\r\nvar myRecord;\r\nclass
    SetScoreExample extends ZEPETO_Script_1.ZepetoScriptBehaviour {\r\n    constructor()
    {\r\n        super(...arguments);\r\n        this.cnt = 0;\r\n        this.cnt2
    = 0;\r\n        this.spriteList = null;\r\n    }\r\n    static getInstance()
    {\r\n        if (this.instance == null) {\r\n            this.instance = new
    SetScoreExample();\r\n        }\r\n        return this.instance;\r\n    }\r\n   
    Start() {\r\n        textList = this.textList;\r\n        picList = this.pictureList;\r\n       
    myRecord = this.myRecord.GetComponent($typeof(UnityEngine_UI_1.Text));\r\n       
    this.StartCoroutine(this.UpdateData(5));\r\n        let ids;\r\n        ClientStarter_1.default.getInstance().getJoinPlayer().forEach((join)
    => {\r\n            ids.push(join.getPlayer().zepetoUserId);\r\n        });\r\n       
    ZEPETO_World_1.ZepetoWorldHelper.GetUserInfo(ids, (info) => {\r\n           
    for (let i = 0; i < info.length; i++) {\r\n                ZEPETO_World_1.ZepetoWorldHelper.GetProfileTexture(ids[i],
    (texture) => {\r\n                    this.spriteList.push(this.GetSprite(texture));\r\n               
    }, (error) => {\r\n                    console.log(error);\r\n               
    });\r\n            }\r\n        }, (error) => {\r\n            console.log(error);\r\n       
    });\r\n    }\r\n    GetSprite(texture) {\r\n        let rect = new UnityEngine_1.Rect(0,
    0, texture.width, texture.height);\r\n        return UnityEngine_1.Sprite.Create(texture,
    rect, new UnityEngine_1.Vector2(0.5, 0.5));\r\n    }\r\n    OnResult(result)
    {\r\n    }\r\n    OnResultForSettingScore(result) {\r\n    }\r\n    OnSetError(error)
    {\r\n        console.error(\"================SET ERROR===================\");\r\n       
    console.error(error);\r\n        //ClientStarter.getInstance().updateScore(score);\r\n   
    }\r\n    OnGetError(error) {\r\n        console.error(\"================GET ERROR===================\");\r\n       
    console.error(error);\r\n        //ClientStarter.getInstance().updateScore(score);\r\n   
    }\r\n    getScore() {\r\n        return score;\r\n    }\r\n    updateRankingBoard()
    {\r\n    }\r\n    *UpdateData(tick) {\r\n        score = 100 * Math.random();\r\n       
    ZEPETO_Script_Leaderboard_1.LeaderboardAPI.SetScore(this.leaderboardId[MinTime],
    0, this.OnResultForSettingScore, this.OnSetError);\r\n        while (true) {\r\n           
    yield new UnityEngine_1.WaitForSeconds(tick);\r\n            //must use lambda.\r\n           
    ZEPETO_Script_Leaderboard_1.LeaderboardAPI.GetRangeRank(this.leaderboardId[MinTime],
    this.startRank, this.endRank, this.resetRule, true, (result) => {\r\n               
    //for each text,\r\n                for (let i = 0; i < textList.length; i++)
    {\r\n                    score = 100 * Math.random();\r\n                   
    if (result.rankInfo.rankList[this.cnt] != null) {\r\n                       
    //update score\r\n                        var rank = result.rankInfo.rankList[this.cnt];\r\n                       
    rank.score = score;\r\n                        ZEPETO_Script_Leaderboard_1.LeaderboardAPI.SetScore(this.leaderboardId[MinTime],
    score, this.OnResultForSettingScore, this.OnSetError);\r\n                       
    this.cnt++;\r\n                    }\r\n                    //no more item :
    empty text.\r\n                    else {\r\n                        this.cnt
    = 0;\r\n                    }\r\n                }\r\n                //resort
    data\r\n                var sortedRank = result.rankInfo.rankList.sort((a, b)
    => {\r\n                    if (a.score > b.score)\r\n                       
    return 1;\r\n                    else if (a.score < b.score)\r\n                       
    return -1;\r\n                    return 0;\r\n                });\r\n               
    for (let i = 0; i < sortedRank.length; i++) {\r\n                    var line
    = textList[i];\r\n                    var pic = picList[i];\r\n                   
    image = pic.GetComponent($typeof(UnityEngine_UI_1.Image));\r\n                   
    text = line.GetComponent($typeof(UnityEngine_UI_1.Text));\r\n                   
    var rank2 = sortedRank[i];\r\n                    text.text = rank2.name + \"
    / \" + rank2.score.toString();\r\n                    //image.sprite = this.spriteList[i];\r\n               
    }\r\n                sortedRank.forEach((rank) => {\r\n                    if
    (rank.name == $extension(\"ZEPETO.Character.Controller.Utils\").GetPlayerWithUserId(ZEPETO_Character_Controller_1.ZepetoPlayers.instance,
    ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoPlayer.userId).name)
    {\r\n                        myRecord.text = \"My Score : \" + rank.score;\r\n                       
    //this.myPicture.sprite = this.spriteList.find();\r\n                    }\r\n               
    });\r\n            }, this.OnGetError);\r\n        }\r\n    }\r\n}\r\nexports.default
    = SetScoreExample;\r\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2V0U2NvcmVFeGFtcGxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiU2V0U2NvcmVFeGFtcGxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsNkNBQW9HO0FBQ3BHLGlEQUFxRDtBQUNyRCx5RUFBK0c7QUFDL0csOERBQXVEO0FBQ3ZELG1EQUEwQztBQUUxQyw2RUFBMEU7QUFDMUUsK0NBQXNEO0FBRXRELElBQUksT0FBb0IsQ0FBQztBQUN6QixJQUFJLFFBQXFCLENBQUM7QUFDMUIsSUFBSSxLQUFZLENBQUM7QUFDakIsSUFBSSxJQUFTLENBQUM7QUFDZCxJQUFJLElBQVcsQ0FBQztBQUNoQixJQUFJLGtCQUFrQixHQUFDLElBQUksQ0FBQztBQUM1QixJQUFJLE9BQU8sR0FBUSxDQUFDLENBQUM7QUFDckIsSUFBSSxTQUFTLEdBQVEsQ0FBQyxDQUFDO0FBQ3ZCLElBQUksS0FBVyxDQUFDO0FBQ2hCLElBQUksUUFBYSxDQUFDO0FBQ2xCLE1BQXFCLGVBQWdCLFNBQVEscUNBQXFCO0lBQWxFOztRQWNZLFFBQUcsR0FBUSxDQUFDLENBQUM7UUFDYixTQUFJLEdBQVEsQ0FBQyxDQUFDO1FBR3RCLGVBQVUsR0FBVSxJQUFJLENBQUM7SUFxSzdCLENBQUM7SUFwS1UsTUFBTSxDQUFDLFdBQVc7UUFHckIsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksRUFDekI7WUFDSSxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksZUFBZSxFQUFFLENBQUM7U0FDekM7UUFFRCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDekIsQ0FBQztJQUVELEtBQUs7UUFFRCxRQUFRLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQztRQUN6QixPQUFPLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUMzQixRQUFRLEdBQUUsSUFBSSxDQUFDLFFBQVEsQ0FBQyxZQUFZLFNBQUMscUJBQUksRUFBRyxDQUFDO1FBQzdDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFB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","assetPath":"Assets/LeaderBoard/SetScoreExample.ts","manifest":{"properties":[{"assembly":"mscorlib","name":"leaderboardId","type":"System.String[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"startRank","type":"System.Single","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"mscorlib","name":"endRank","type":"System.Single","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"ZEPETO.Script.Leaderboard","name":"resetRule","type":"ZEPETO.Script.Leaderboard.ResetRule","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"pictureList","type":"UnityEngine.GameObject[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"textList","type":"UnityEngine.GameObject[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"myRecord","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"myPicture","type":"UnityEngine.GameObject","isArray":false,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]},{"assembly":"UnityEngine.CoreModule","name":"spriteList","type":"UnityEngine.Sprite[]","isArray":true,"initValue":[],"enumKeys":[],"enumValues":[],"attributes":[]}],"name":"SetScoreExample","description":""},"isCompiled":true}'
  typescriptHash: 1222eb8fc6cd8f0da299d2495133a1bf
  onlyWriteTrigger: 0
